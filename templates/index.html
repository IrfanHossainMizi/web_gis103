{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  />
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>`
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="{% static 'L.Geoserver.js' %}"></script>

    <title>Geo Inmormatics</title>
</head>
<!-- try for nav bar -->



<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">    
<div class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">

                    <div class="navbar-header">
                        <button class="navbar-toggle" data-target="#mobile_menu" data-toggle="collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                        <a href="#" class="navbar-brand">Swadesh Properties</a>
                    </div>

                    <div class="navbar-collapse collapse" id="mobile_menu">
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#" class="dropdown-toggle" data-toggle="dropdown">Housing Project <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">About One</a></li>
                                    <li><a href="#">About Two</a></li>
                                    <li><a href="#">About Three</a></li>
                                    <li><a href="#">About Four</a></li>
                                    <li><a href="#">About Five</a></li>
                                    <li><a href="#">About Six</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Welcome</a></li>
                            <li><a href="#">Services</a></li>
                            <li><a href="#">Gallery</a></li>
                            <li><a href="#">Contact Us</a></li>
                        </ul>
                        <ul class="nav navbar-nav">
                            <li>
                                <form action="" class="navbar-form">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <input type="search" name="search" id="" placeholder="Search Anything Here..." class="form-control">
                                            <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
                                        </div>
                                    </div>
                                </form>
                            </li>
                        </ul>

                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#"><span class="glyphicon glyphicon-user"></span> Profile</a></li>
                            <li><a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-log-in"></span> Login / Sign Up <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="/accounts/login">Login</a></li>
                                    <li><a href="/accounts/logout/">Log out</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>





<!-- try for nav bar end -->


<!-- try for slide pictur -->





<style>
    #map {
      width: 100%;
      height: 80vh;
    }
  </style>
<body>


    <h1>Sodesh properties</h1>
    <div id="map"></div>


    
    <script>
        var map = L.map("map").setView([23.736260, 90.466523], 7);
  
        var osm = L.tileLayer(
          "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
          {
            attribution:
              "&copy; <a href='https://openstreetmap.org/copyright'> Openstreet map</a> contributors",
          }
        );
  
        var darkLayer = L.tileLayer(
          "https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",
          {
            maminZoom: 1,
            xZoom: 20,
            attribution:
              '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
          }
        );
  
        var watercolor = L.tileLayer(
          "https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",
          {
            attribution:
              'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            subdomains: "abcd",
            minZoom: 1,
            maxZoom: 16,
            ext: "jpg",
          }
        );
  
        var baseLayers = {
          osm: osm,
          // dark: darkLayer,
          "water color map": watercolor,
        };
  
        osm.addTo(map);
        L.control.layers(baseLayers).addTo(map);
// give color using code on this shape file
              //Geojson style function
      // function geojsonStyle(feature) {
      //   return {
      //     fillColor: getColor(feature.properties.adm1_en),
      //     weight: 2,
      //     opacity: 1,
      //     color: "#5e380f",
      //     fillOpacity: 0.7,
      //   };
      // }

      // //GetColor function
      // function getColor(adm1_en) {
      //   if (adm1_en == "Dhaka") {
      //     return "#008080";
      //   } else if (adm1_en == "Rajshahi") {
      //     return "#badd99";
      //   } else if (adm1_en== "Chittagong") {
      //     return "#dd99ba";
      //   }else if (adm1_en == "Sylhet") {
      //     return "#115CE9";
      //   } else if (adm1_en== "Khulna") {
      //     return "#A8A807"; }
      //     else {
      //     return "#c69540";
      //   }
      // }

        // $.getJSON("{% url 'bangladeshData' %}", function (data) {
        //     L.geoJSON(data, {
        //   onEachFeature: function (feature, layer) {
        //     layer.bindPopup(
        //       `<h5>District Name: ${feature.properties.adm2_en}</h5><h5>Region name: ${feature.properties.adm1_en}</h5>`
        //     );
        //   },style: geojsonStyle,}).addTo(map);
        // console.log(data);
        
        // });

// geoserver request


// wms layer
// for color full map in geoserver 
var wmsLayer = L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
  layers: "webgis_101:irfan_house101",
});






//wfs layer

var wfsLayer = L.Geoserver.wfs("http://localhost:8080/geoserver/wfs", {
  layers: "webgis_101:bangladesh_from_db,webgis_101:housing_Project",

  style: {
    color: "black",
    fillOpacity: "0",
    opacity: "0.5",
  },
 
  onEachFeature: function (feature, layer) {
    // eta speific feature er popup dekhanor jonno
    if(feature.properties && feature.properties.Plot_No){


    layer.bindPopup(
      `<h5>Area  Amaount SQFT: ${feature.properties.Area_Sqft}</h5>
      <h5>Katha Amaount: ${feature.properties.Katha}</h5>
      <h5>Plot Number: ${feature.properties.Plot_No}</h5>
      <h5><a href="/accounts/login/">Details</a></h5>`
    );

    }
  },
});
wfsLayer.addTo(map);


//.......

// for color full image and its legend which is wms layer in geoserver
wmsLayer.addTo(map);
var layerLegend = L.Geoserver.legend("http://localhost:8080/geoserver/wms", {
  layers: "webgis_101:irfan_house101",
  style: `house_irfan101`,
});

layerLegend.addTo(map);



    </script>
</body>
</html>

